var CookieJar=Class.create();CookieJar.prototype={prependString:"__CJ_",initialize:function(a){if(this.options={expires:3600,path:"",domain:"",secure:""},Object.extend(this.options,a||{}),""!=this.options.expires){var b=new Date;b=new Date(b.getTime()+1e3*this.options.expires),this.options.expires="; expires="+b.toGMTString()}""!=this.options.path&&(this.options.path="; path="+escape(this.options.path)),""!=this.options.domain&&(this.options.domain="; domain="+escape(this.options.domain)),"secure"==this.options.secure?this.options.secure="; secure":this.options.secure=""},put:function(a,b){a=this.prependString+a,cookie=this.options;var c=typeof b;switch(c){case"undefined":case"function":case"unknown":return!1;case"boolean":case"string":case"number":b=String(b.toString())}var d=a+"="+escape(Object.toJSON(b));try{document.cookie=d+cookie.expires+cookie.path+cookie.domain+cookie.secure}catch(e){return!1}return!0},set:function(a,b){this.put(a,b)},remove:function(a){a=this.prependString+a,cookie=this.options;try{var b=new Date;b.setTime(b.getTime()-36e5);var c="; expires="+b.toGMTString();document.cookie=a+"="+c+cookie.path+cookie.domain+cookie.secure}catch(d){return!1}return!0},get:function(a){a=this.prependString+a;var b=document.cookie.match(a+"=(.*?)(;|$)");return b?unescape(b[1]).evalJSON():null},empty:function(){keys=this.getKeys(),size=keys.size();for(var a=0;a<size;a++)this.remove(keys[a])},getPack:function(){for(pack={},keys=this.getKeys(),size=keys.size(),i=0;i<size;i++)pack[keys[i]]=this.get(keys[i]);return pack},getKeys:function(){for(keys=$A(),keyRe=/[^=; ]+(?=\=)/g,str=document.cookie,CJRe=new RegExp("^"+this.prependString);void 0!=(match=keyRe.exec(str));)CJRe.test(match[0].strip())&&keys.push(match[0].strip().gsub(CJRe,""));return keys}};
